\section{Pretrained model evaluation}

\subsection{Per-benchmark results}\label{appendix:full_results_pretraining}

\begin{table}
\centering
\input{results/tables/reading_comprehension_benchmarks}
\caption{Non-aggregated pretraining evaluation results for the Knowledge and Reasoning categories.}
\label{table:full_results_pretraining_reading_comprehension}
\end{table}

\begin{table}
\centering
\input{results/tables/knowledge_benchmarks}
\caption{Non-aggregated pretraining evaluation results for the Knowledge and Reasoning categories.}
\label{table:full_results_pretraining_knowledge}
\end{table}

\begin{table}
\centering
\input{results/tables/commonsense_benchmarks}
\caption{Non-aggregated pretraining evaluation results for the Commonsense reasoning and understanding benchmarks.}
\label{table:full_results_pretraining_commonsense}
\end{table}

\begin{table}
\centering
\input{results/tables/math_reasoning_benchmarks}
\caption{Non-aggregated pretraining evaluation results for math and reasoning benchmarks.}
\label{table:full_results_math_reasoning}
\end{table}

\begin{table}
\centering
\input{results/tables/code_benchmarks}
    \caption{Non-aggregated pretraining evaluation results for long context (\TBD{still missing}) and code.}
\label{table:full_results_code}
\end{table}

\begin{table}
\centering
    \input{results/tables/general_benchmarks}
    \caption{Non-aggregated pretraining evaluation results for aggregate benchmarks.}
\label{table:full_results_general}
\end{table}


\section{Reproducibility: Prompts and fewshots examples}\label{appendix:prompt_details}

\begin{table}[]
\small
\centering
\setlength{\tabcolsep}{1.5pt}
\begin{tabular}{lcccc}
\toprule
\small
\bfseries Benchmark & \bfseries License & \bfseries \# samples & \bfseries \# few-shot & \bfseries Metric \\
\midrule
\makecell[l]{Adv SQuAD \citep{jia-liang-2017-adversarial}} & &  & 1 &  F1 \\
\midrule
\makecell[l]{AGIEval \citep{zhong2023agieval}} & MIT & 2546 & 3-5 & Accuracy \\
\midrule
\makecell[l]{ARC-C \citep{clark2018think}} & Apache 2.0 & 1165 & 0 & Accuracy \\
\midrule
\makecell[l]{Big Bench Hard \citep{suzgun-etal-2023-challenging}} & Apache 2.0 &  6511 & 3 (CoT) & EM (micro avg) \\
\midrule
\makecell[l]{CommonSenseQA \\\citep{talmor-etal-2019-commonsenseqa}} & & 1140 & 7 & Accuracy \\
\midrule
\makecell[l]{DROP \citep{dua-etal-2019-drop}} &  & 9536  & 3 & F1\\
\midrule
\makecell[l]{Dynabench SQuAD \citep{}} & &  &  &  \\
\midrule
\makecell[l]{GSM8k \citep{cobbe2021training}} & MIT & 1319 & 8 & EM maj1@1 \\
\midrule
\makecell[l]{GSM-Plus \\ \citep{cobbe2021training}} & &  & 8  & EM maj1@1 \\
\midrule
\makecell[l]{HumanEval \citep{chen2021evaluating}} & MIT & 164 & 0 & Pass@1 \\
\midrule
\makecell[l]{InfinityBench \citep{zhang2024infty}} & &  & & F1 \\
\midrule
\makecell[l]{L-Eval \citep{an2023eval}} & &  & & \\
\midrule
\makecell[l]{MATH \citep{hendrycks2021measuring}} & MIT & 5000 & 4 & EM maj1@1 \\
\midrule
\makecell[l]{MBPP \citep{austin2021program}} & & 500 & 3 & Pass@1 \\
\midrule
\makecell[l]{MMLU \citep{hendrycks2021mmlu}} & MIT & 14042 & 5 & Accuracy (micro) \\
\midrule
    \makecell[l]{MMLU-Pro \citep{wang2024mmlu}} &  & 12032 & 5 & Accuracy (micro) \\
\midrule
\makecell[l]{Needle in Haystack\\ \citep{kuratov2024search}} & &  & & \\
\midrule
\makecell[l]{OpenBookQA\\ \citep{mihaylov-etal-2018-suit}} & &  & 0 & Accuracy \\
\midrule
\makecell[l]{PAWS \citep{}} & &  & 5  &  Accuracy \\
\midrule
\makecell[l]{PiQA \citep{bisk2020piqa}} & Academic Free & 1838 & 0 & Accuracy \\
\midrule
\makecell[l]{RACE \citep{lai-etal-2017-race}} & &  & 0 & Accuracy (micro)  \\
\midrule
\makecell[l]{QuAC \citep{choi-etal-2018-quac}} & &  & 1 & F1 \\
\midrule
\makecell[l]{QQP \citep{quoraFirstQuora}} & &  5 &  Accuracy &  \\
\midrule
\makecell[l]{SCROLLS \citep{shaham-etal-2022-scrolls}} & &  & & \\
\midrule
\makecell[l]{SiQA \cite{sap-etal-2019-social}} &   & 1954 & 0 & Acc \\
\midrule
\makecell[l]{SQuAD v2 \citep{rajpurkar-etal-2018-know}} & &  & 5 & EM \\
\midrule
    \makecell[l]{SQuAD (for adversarial plots)\\ \citep{rajpurkar-etal-2018-know}} & &  & 1 & EM \\
\midrule
\makecell[l]{TriviaQA \cite{joshi-etal-2017-triviaqa}} & Apache 2.0 & 11313 & 5 & EM \\
\midrule
\makecell[l]{TruthfulQA \citep{lin-etal-2022-truthfulqa}} & & & 0 & MC2\_score \\
\midrule
\makecell[l]{Winogrande \citep{sakaguchi2021winogrande}} & & &  5 & Accuracy \\
\midrule
\makecell[l]{WorldSense \\\citep{benchekroun2023worldsense}} &  & 87048 & 0 & Accuracy (macro)\\
\bottomrule
\end{tabular}
\caption{Few-shot and metric settings for all pretraining benchmarks used in the paper, in alphabetical order.}\label{table:pretraining_benchmark_details}
\end{table}

\subsection{Paraphrases for MMLU prompt robustness experiment}

In Table~\ref{table:mmlu_paraphrase_variations}, we report the paraphrases we use for our prompt robustness experiments with MMLU in Section~\ref{subsec:robustness}.
Each instruction is followed by five few-shot examples, followed by the word \texttt{Answer:};
We compute scores by comparing the log probabilities of all possible answer labels.

\begin{table}
    \begin{tabular}{ll}
        \toprule
        \textit{Default} & \makecell[l]{The following are multiple choice questions (with answers) about \{\{ subject \}\}}. \\
        \midrule
        \textit{Variation 1} & \makecell[l]{The following are multiple choice questions (with answers) about \{\{ subject \}\}. Choose\\ the best answer for the final question.} \\

        \midrule
        \textit{Variation 2} & \makecell[l]{Given the following questions and four candidate answers (A, B, C and D), choose the\\ best answer for the final question.} \\
        \midrule
        \textit{Variation 3} & \makecell[l]{You are an expert in solving MCQ questions covering vast knowledge. Analyse the \\following questions (with answers) and select the correct answer for the final question.} \\
        \midrule
        \textit{Variation 4} & \makecell[l]{You are an expert in solving questions on \{\{ subject \}\}. Analyse the following questions\\ (with answers) and choose the best answer for the final question.} \\
        \midrule
        \textit{Variation 5} & \makecell[l]{Solve the following multiple choice questions on \{\{ subject \}\}.}\\
    \bottomrule
    \end{tabular}
    \caption{Paraphrased instructions used for prompt robustness experiments described in Section~\ref{subsec:robustness}. Each instruction is followed by five few-shot examples, followed by `\texttt{Answer: }'.}\label{table:mmlu_paraphrase_variations}
\end{table}

\subsection{Contamination analysis}\label{app:contamination_analysis}

In Figure \ref{figure:contamination_analysis}, we show how both the percent of data marked contaminated and the estimated performance gain changes with the ratio of tokens occurring in an 8-gram also present in the training corpus. 
For some datasets, such as for instance SiQA and HellaSwag, there is a clear right threshold, and the estimated performance gain changes stably with the threshold.
For other datasets, the behaviour is much more erratic, with large spikes or negative performance gains, suggesting that the chosen contamination method may be suboptimal for those specific datasets.
A dataset for which this is easy to spot is WorldSense, where the found contamination comprises of false positives consisting of templated phrases such as \emph{`The Taj Mahal and the Sagrada Familia'}, that are part of but not relevant to the asked question.
Note that when close to 100\% of a dataset is marked contaminated, the reported estimations will be particularly unreliable, because the sample of `clean' samples is too small to get a reliable estimate.

\begin{figure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/agi_english}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/bbh}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/boolq}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/csqa}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/drop}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/gsm8k}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/hellaswag}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/human_eval}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/math}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/mbpp}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/mmlu}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/mmlu_pro}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/nq}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/obqa}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/piqa}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/siqa}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/squad}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/winogrande}
    \end{subfigure}
    \begin{subfigure}[b]{0.246\textwidth}
    \includegraphics[width=\textwidth]{assets/pretraining_results/contamination_analysis/worldsense}
    \end{subfigure}
    \caption{Estimation of performance gain and estimated contamination per threshold.}\label{figure:contamination_analysis}
\end{figure}
